
---
const res = await fetch(`${import.meta.env.PUBLIC_STRAPI_URL}/api/users-covers?populate=*`)
const json = await res.json()
const data = Array.isArray(json?.data) ? json.data : []

const base = import.meta.env.PUBLIC_STRAPI_URL || ''

const withBase = (file:any) => {
    const f = Array.isArray(file) ? file[0] : file
    let url = f?.url
    if (url && !url.startsWith('http')) url = base + url
    return url || ''
}
---
<div class="table-section-item-img-back">
    {data.map((item:any) => {
        const imageUrl1 = withBase(item.user1)
        const imageUrl2 = withBase(item.user2)
        const imageUrl3 = withBase(item.user3)
        const imageUrl4 = withBase(item.user4)

        return (
                <>
                    <img src={imageUrl1} height="60" width="60" alt="team" class="table-section-item-images-1" />
                    <img src={imageUrl2} height="60" width="60" alt="team" class="table-section-item-images-2" />
                    <img src={imageUrl3} height="60" width="60" alt="team" class="table-section-item-images-3" />
                    <img src={imageUrl4} height="60" width="60" alt="team" class="table-section-item-images-4" />
                </>
        )
    })}
</div>